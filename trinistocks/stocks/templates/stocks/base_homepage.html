{% extends "base.html" %}
{% load django_tables2 %}
{% load static %}

    {% block headerscripts%}
    <!-- JSON-LD markup generated by Google Structured Data Markup Helper. -->
    <script type="application/ld+json">
    {
    "@context" : "http://schema.org",
    "@type" : "Dataset",
    "name" : "Stocks Traded on the TTSE",
    "description" : "Latest data for trini stocks from the Trinidad and Tobago Stock Exchange (TTSE)"
    }
    </script>
    {% endblock headerscripts%}

    {% block description %}Daily volume,price changes etc. for trini stocks traded on the 
    Trinidad and Tobago Stock Exchange (TTSE)
    {% endblock description %}

    {% block title %}trinistocks | Home
    {% endblock title %}

    {% block customizationbar%}
    {% endblock customizationbar%}

    {% block mainblock %}
    <h1 style="" class="" id="charttitle">Stocks Traded on the TTSE on {{ selected_date }}</h1>
    <!-- Chart -->
    <div id="chartdiv" class="chart-div" style=""></div>
    <div class="is-clearfix clearfix"></div>
    {% render_table table %}
    {% endblock mainblock %}

    {% block chartjs %}
    {{ graph_value_traded|json_script:"graph_value_traded" }}
    {{ graph_symbols|json_script:"graph_symbols" }}
    <script>
    var js_symbols = JSON.parse(document.getElementById('graph_symbols').textContent);
    var value_traded = JSON.parse(document.getElementById('graph_value_traded').textContent);
    var data = [
        {
            y: js_symbols,
            x: value_traded,
            marker:{
                color: ['#ff3300','#ff5410','#ff6c22','#ff8134','#ff9347','#ffa45b','#ffb470','#ffc387','#ffd29f','#ffd29f','#ffd499']
            },
            textinfo: "label+percent",
            hoverinfo: "label+percent",
            textposition: "outside",
            automargin: true,
            type: 'bar',
            orientation:'h'
        }
    ];
    var layout = {
        xaxis: {
            automargin: true,
            title: {text:'Dollar Volume Traded ($)',
            standoff: 20
            },
            titlefont: {
            size: 20
            },
            showticklabels: true,
            tickangle: 'auto',
            tickfont: {
            size: 14
            },
            exponentformat: 'SI',
            showexponent: 'all'
        },
        yaxis: {
            automargin: true,
            title: {text:'Ticker Symbol',
            standoff: 0},
            titlefont: {
            size: 20
            },
            showticklabels: true,
            tickangle: 'auto',
            tickfont: {
            size: 16
            },
            exponentformat: 'SI',
            showexponent: 'all',
            autorange: 'reversed'
        }
    };
    Plotly.newPlot('chartdiv', data,layout);
    </script>
    {% endblock chartjs %}
    <!-- END MAIN -->
    
    <!--Javascript-->
    {% block activepagetoggle %}
    $("#homelink").toggleClass("has-background-red");
    $("#optionsbutton").unbind("click");
    $("#optionsbutton").toggleClass("graytext");
    $("#optionstooltip").toggleClass("is-hidden");
    {% endblock %}