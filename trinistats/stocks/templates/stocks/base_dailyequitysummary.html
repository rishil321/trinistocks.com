{% extends "base.html" %}
{% load render_table from django_tables2 %}
{% load static %}

    {% block sidepanelcontents %}
    <div class="panel-block">
        <label class="panellabel" for="date">Trading date</label>
        <input type="date" class="custom-date-selector" value="{{ selecteddateparsed }}" id="date" name="selecteddate">
    </div>
    <div class="panel-block">
        <input type="submit" class="custom-red-button" onclick="location.href='{% url 'dailyequitysummary' %}" value="Search"/>
    <div>
    {% endblock sidepanelcontents %}

    {% block mainblock %}
    <!-- Chart -->
    <div>
        <h2 style=""id="charttitle">Equities Traded on {{ selecteddate }}</h2>
        <canvas id="stockchart" width="4" height="1">
            Stock Chart
        </canvas>
    </div>
        <br>
    <div class="tablediv">
        {% render_table table %}
    </div>
    {% endblock mainblock %}

    {% block chartjs %}
    {{ graphvaluetraded|json_script:"graphvaluetraded" }}
    {{ graphsymbols|json_script:"graphsymbols" }}
    <script>
    var ctx = document.getElementById('stockchart').getContext("2d");
    var jssymbols = JSON.parse(document.getElementById('graphsymbols').textContent);
    var valuetraded = JSON.parse(document.getElementById('graphvaluetraded').textContent);
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: jssymbols,
            datasets: [
                {
                    backgroundColor: ["red","blue","green","cyan","purple","yellow",
                    "lime","brown","olive","silver","black","maroon","darkblue","orange",
                    "grey"],
                    data: valuetraded,
                }
            ]
        },
        options: {
            legend: {
            display: false
         },
         tooltips: {
            enabled: true
         }
        }
    });
    </script>
    {% endblock chartjs %}
    <!-- END MAIN -->
    
    <!--Javascript-->
    {% block activepagetoggle %}
    $("#dailysummarylink").toggleClass("has-background-danger");
    {% endblock %}