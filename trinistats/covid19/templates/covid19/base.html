{% load static %}
<!doctype html>
<html lang="en">
<head>
    <!--Metadata-->
    <meta charset="utf-8"/>
    <meta name="description" content="Data about T&T's Covid-19 cases.">
    <meta name="author" content="Rishi Latchmepersad">
    <!-- Twitter Card data -->
    <meta name="twitter:card" content="Data about T&T's Covid-19 cases.">
    <meta name="twitter:title" content="Trinistats:COVID-19">
    <meta name="twitter:description" content="Tabular/graphical data about T&T's COVID-19 cases.">
    <meta name="twitter:creator" content="Rishi Latchmepersad">
    <!-- Twitter Summary card images must be at least 120x120px -->
    <meta name="twitter:image" content="https://drive.google.com/open?id=1lgFtaKmY5n3DF3YoiF3Ye9bafxHhfSDE">
    <!-- Open Graph data -->
    <meta property="og:title" content="Trinistats:COVID-19" />
    <meta property="og:type" content="graph" />
    <meta property="og:url" content="http://www.trinistats.com/covid19" />
    <meta property="og:image" content="https://drive.google.com/open?id=1lgFtaKmY5n3DF3YoiF3Ye9bafxHhfSDE" />
    <meta property="og:description" content="Tabular/graphical data about T&T's COVID-19 cases." />
    <meta property="og:site_name" content="Trinistats:COVID-19" />
    <!--End Metadata-->
    <title>{% block title %}Trinistats | Covid-19{% endblock title %}</title>
     <!-- 3rd party CSS files-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://kit.fontawesome.com/dbb1ac5feb.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">
    <!-- Local CSS files-->
    <link rel="shortcut icon" href="{%  static 'stocks/favicon.ico' %}">
    <link rel="stylesheet" href="{% static 'covid19/styles.css' %}">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-162313143-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-162313143-1');
    </script>
    <!--Error Messages -->
    {% if errors != "" %}
    <script type="text/javascript">
            alert('{{ errors }}');
    </script>
    {% endif %}
</head>
<body id="mainbody">
    <!-- Top Navbar -->
    <nav class="navbar is-dark" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
            <div class="navbar-item">
            <img src="{%  static 'central/tntflag.png' %}" class="iconimg">
            </div>
            <a role="button" class="navbar-burger burger has-text-white" aria-label="navbar-menu" aria-expanded="false" data-target="viewsnavbar">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            </a>
        </div>
        <div id="viewsnavbar" class="navbar-menu is-centered left-side-menu">
            <div class="navbar-start">
                <a id="homelink" class="navbar-item" href="{% url "central:landingpage" %}">
                    Home
                </a>
                <a id="cumulativelink" class="navbar-item border-red" href="{% url "covid19:totals" %}">
                    Cumulative
                </a>
                <a id="dailylink" class="navbar-item" href="{% url "covid19:daily" %}">
                    Daily
                </a>
                <a id="aboutlink" class="navbar-item" href="{% url "covid19:about" %}">
                    About
                </a>
            </div>
            <div class="navbar-end ">
            <a role="button" class="navbar-item" id="config-menu-button">
            <i class="fas fa-cog fa-2x"></i>&nbsp Configure
            </a>
            </div>
        </div>
    </nav>
    <!--Right side menu-->
    <aside class="has-text-centered menu is-hidden right-side-menu" id="config-menu">
    <p class="is-size-4">Configuration Options</p>
        {% block rightsidebarform %}
        {% endblock rightsidebarform %}
    </aside>
    
    <!-- Main content-->
    {% block mainblock %}
    <section style="" class="section" id="mainsection">
        <div class="container has-text-centered" style="" id="maindiv">
        {% block maindiv %}
        {% block pagetitle %}
        <h2 class="is-size-3" style="" id="charttitle">
        T&T Covid-19 Data
        </h2>
        {% endblock pagetitle %}
        {% endblock maindiv %}
        </div>
    </section>
    {% endblock mainblock %}
    <!-- END MAIN -->

    <!--Javascript-->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.touchswipe/1.6.19/jquery.touchSwipe.min.js"></script>
    {% block chartjs %}
    <script>
    var ctx = document.getElementById('covid19chart').getContext("2d");
    var jsdates = [];
    var pythondates = {{ graphdates|safe }};
    for (i=0; i<pythondates.length;i++){
        jsdates.push(pythondates[i]);
    }
    var closingquotes = JSON.parse('{{ graphclosingquotes|safe }}');
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: jsdates,
            datasets: [
                {
                    backgroundColor: 'rgb(255, 0, 0)',
                    data: closingquotes,
                    label: 'Closing Quote',
                }
            ]
        },
        options: {
        }
    });
     //get the div holding the canvas
    const chartdiv = document.getElementById("chartdiv");
    //create a resize observer to resize our chart
    const ro = new ResizeObserver( entries => {
    for (let entry of entries) {
        ctx.canvas.width = chartdiv.clientWidth;
        myChart.resize();
        myChart.update();
    }
    });
    // Observe one or multiple elements
    ro.observe(chartdiv);
    </script>
    {% endblock chartjs %}
    <script>
    $(document).ready(function() {
    //highlight the current page
    {% block highlightpage%}
    {% endblock highlightpage %}
    // Check for click events on the navbar burger icon
    $(".navbar-burger").click(function() {
        // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
        $(".navbar-burger").toggleClass("is-active is-pulled-left");
        $(".navbar-menu").toggleClass("is-active is-pulled-left");
    });
    // Check for click events on the navbar config menu icon
    $("#config-menu-button").click(function() {
        // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
        $("#config-menu").toggleClass("is-hidden");
        $("#config-menu-button").toggleClass("is-active");
    });
    });
    </script>
    {% block morejs%}
    {% endblock morejs%}
</body>
</html>